<!DOCTYPE html>
<html>

<!-- *********************** HEAD *********************** -->
<head>
<style type="text/css">
.knitr .inline {
  background-color: #f7f7f7;
  border:solid 1px #B0B0B0;
}
.error {
	font-weight: bold;
	color: #FF0000;
}
.warning {
	font-weight: bold;
}
.message {
	font-style: italic;
}
.source, .output, .warning, .error, .message {
	padding: 0 1em;
  border:solid 1px #F7F7F7;
}
.source {
  background-color: #f5f5f5;
}
.rimage .left {
  text-align: left;
}
.rimage .right {
  text-align: right;
}
.rimage .center {
  text-align: center;
}
.hl.num {
  color: #AF0F91;
}
.hl.str {
  color: #317ECC;
}
.hl.com {
  color: #AD95AF;
  font-style: italic;
}
.hl.opt {
  color: #000000;
}
.hl.std {
  color: #585858;
}
.hl.kwa {
  color: #295F94;
  font-weight: bold;
}
.hl.kwb {
  color: #B05A65;
}
.hl.kwc {
  color: #55aa55;
}
.hl.kwd {
  color: #BC5A65;
  font-weight: bold;
}
</style>
<style type="text/css">
.knitr .inline {
  background-color: #f7f7f7;
  border:solid #B0B0B0;
}
.error {
	font-weight: bold;
	color: #FF0000;
}
.warning {
	font-weight: bold;
}
.message {
	font-style: italic;
}
.source, .output, .warning, .error, .message {
	padding: 0 1em;
  border:solid 1px #F7F7F7;
}
.source {
  background-color: #e0ffff; /*#f5f5f5;*/
}

.output {
  background-color: #ffffe6; 
}

.rimage .left {
  text-align: left;
}
.rimage .right {
  text-align: right;
}
.rimage .center {
  text-align: center;
}
.hl.num {
  color: #AF0F91;
}
.hl.str {
  color: #317ECC;
}
.hl.com {
  color: #AD95AF;
  font-style: italic;
}
.hl.opt {
  color: #000000;
}

/* Font of variable names*/
.hl.std {
  color: #585858;
}
.hl.kwa {
  color: #295F94;
  font-weight: bold;
}
.hl.kwb {
  color: #B05A65;
}
.hl.kwc {
  color: #55aa55;
}
.hl.kwd {
  color: #BC5A65;
  font-weight: bold;
}
</style>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="author" content="Prof. Dr. Johannes Binswanger" />
 
<title>Programming for Practical Data Analysis</title>

<!-- ******* LIBRARIES AND PLUGINS ******* -->

<!-- my own css file -->
<link rel="stylesheet" href="css/baseline.css" type="text/css" />

<!-- jquery, nestedToc, slidesjs ... -->
<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript">//call jquery library</script>

<script src="js/jquery-nestedToc.js">// get nestedToc from http://www.jqueryscript.net/menu/Dynamic-Table-of-Contents-Generator-With-jQuery-nestedToc.html
</script>

<script src="js/jquery.slides.min.js"></script>


</head>

<!-- *********************** END OF HEAD *********************** -->

<body>
<!-- ************************************** -->
<!-- AUTOMATIC INSERTION OF "BACK TO TOP"-->
<script>
// Select all headers to prepend "back to top" link.
// However, exclude the first heading, and the author and date
// Do so by creating a class noBackToTop. It is possible to assign multiple classes to an element.
// See http://stackoverflow.com/questions/3015103/jquery-exclude-elements-with-certain-class-in-selector

//NOTE: It is very important to use .before and not .prepend below!!!
// If you use prepend, the TOC gets screwed as the text shows up there as well!!

$(document).ready(function(){
	// Automatic "back to top" before a new heading, but not when the heading is of class noBackToTop, because 
	// there is immediately a subheading
    $(":header:not('.noBackToTop')").before("<p><a href='#docHeader'; style = 'font-size:1em; color: #A0A0A0'>[Back to top]</a></p>");
	// The back to top at the end of the document
	 $(".scriptText").append("<p><a href='#docHeader' style = 'font-size:1em; color: #A0A0A0'>[Back to top]</a></p>");
	 
	 //Horizontal ruler
	 $("h1:not('.noBackToTop')").before("<div class='markEnd'> </div>");
	 
	 
	
});


</script>



<!-- ************************************** 
     **************************************
	 **************************************
	 
-->








<div id="content">

<!-- *********************** TITLE ITEMS *********************** -->

<div id="docHeader">
    <p class="title">Programming for Practical Data Analysis</p>
    <h4 class="author noBackToTop"><em>Johannes Binswanger, University of St. Gallen</em></h4>
    <h4 class="date noBackToTop"><em>Spring 2016</em></h4>
</div> <!-- end of docHeader div -->



<!-- *********************** TABLE OF CONTENT (TOC) *********************** -->

<!-- This contains a toggle button 
and the table of content -->

<div class="tocContainer">
     
<script>
//jQuery code for toggle button
$( document ).ready( function( ) {
$( ".TOCbutton" ).click(function() {
  $( ".tocToggleContainer" ).toggle();
});
});
</script>

<!-- the button -->
<button class="TOCbutton" style="color: #27738C;font-size: 20px;">Show/hide table of content</button>




</div>

<div class="tocToggleContainer">
<!-- This div is empty, for the toggle -->
</div>

<!-- The following div below has the same class as the previous!! And do not forget to add the particular styling about display. Note that the second div contains another div that contains the toc. This is to keep both the toc and the toggle work. It may not be necessary with the particular toc solution chosen here, but it is necessary for other toc solutions.
-->
    <div class="tocToggleContainer" style="display: none">
    <div class = "toc">
        <script>
        // This script is simply copied from 
        // http://www.jqueryscript.net/menu/Dynamic-Table-of-Contents-Generator-With-jQuery-nestedToc.html
        $( document ).ready( function( ) {
        $('.toc').nestedToc({
    
        container: '.scriptText'
    
      });
      });
      </script>
</div>
</div>





<!-- Button for download as pdf -->
<!-- Do NOT use something like 

<button class = "downloadPDF"><a href="test.pdf" style="color: #27738C; text-decoration:none;">Get this page as PDF</a></button>

Although it works in Chrome, Android, Edge, it doesn't in Firexox an IE. The problem is the anchor tags inside the button. With only the anchor tags not inside the button, everything works well. 

There is a solution that works for all browsers, luckily: JavaScript, as specified below.

-->

<!-- *********************** Download as pdf DISABLED  *********************** 


<button class="downloadPDF" onclick = "window.open('pdfs/script_as_pdf.pdf')" style="color: #27738C;">
Get this page as PDF</button>

-->


<!-- ************************************************************************* -->


<!-- *********************** MAIN DOCUMENT STARTS HERE *********************** -->



<!-- ************************************************************************* -->



<div class = "scriptText"> <!-- This div contains the main text -->








<!-- *********************** INTRODUCTION *********************** -->
<h1 id="introduction" class="noBackToTop" style = "padding-top: 20px;">Introduction</h1>


<p>In a world full of cars, driving is a useful skill. Indeed, many people know how to drive. In a world full of data - such as our modern world - programming skills for data analysis are highly useful. However, many people do <em>not</em> know how to program, including many economics students &hellip; Why is data analysis so important in today's world? This is because the modern world is so rich with data, and because data underlie important decisions made in governments, firms, NGOs and elsewhere. Or, at least, that's how it should be &hellip;</p>

<p>In this course, you will learn essential elements of programming that allow you to analyze and visualize data, as well as communicate your results such that they can be distributed to decision making teams in ministries and boardrooms. So, importantly, this course is not "just" about programming. It's about the whole process of data-based decision making. This includes the collection of data, data analysis, data visualization, and communication.
</p>


<p>Now, "programming" is a sort of awe-inspiring word. What does it actually mean? During this course you will learn to understand that programming is <em>not</em> so much about making complicated calculations and statistical analysis. And it's not just about coding. What programming really is about is the <b>automation of tasks</b>. More poetically, programming is about finding universal solution procedures to problems by making use of algorithms. That sounds awesome but also pretty abstract. Keep it in mind and during the course you will learn to understand what this means.</p>

<p>In this course we will make use of the programming environment of the <em>R language</em>. R has become extremely popular as a tool for data analysis in recent years (see <a href="http://r4stats.com/articles/popularity/" target = "_blank">article</a> on r4stats). R is much more popular among programmers than commercial software, with the exception of SAS and SPSS (the latter only among academics). However, SPSS offers generally less functionality. Other popular programming languages are Python and Java. Python is also quite easy to learn, however, it is somewhat cumbersome to get it running on Windows machines. As for Java, it takes considerably more time before you can do anything sophisticated. As you can see in the mentioned article, R is clearly more popular than Stata or Matlab when it comes to job requirements (in the analytics business). It is also more popular among academics, but only marginally so. However, I figured that most of you do not necessarily want to become academics, and so, all in all, R seemed the best-suited programming language for this course.</p>

<p>But why not just having an advanced course in Excel? Well, excel is not really a useful analytics tool since it is not made for programming. This means that you forgo many options to <em>automate</em> your analysis. Automation means that you write your code only once, and whenever your boss wants to see a new analysis, you change a parameter, hit a button, and within a minute you have a beautiful new report. In Excel, you would possibly be clicking around for several hours, and you would most likely make mistakes on that way. In other words, you would feel pretty miserable. You will get to understand better what I mean during this course. As a side-note, it is possible to program with Excel. However, this would require to learn the Visual Basic programming language. It seems much more practical to directly learn R, instead!</p>


<p></p>
<p></p>



<!-- *************************************************************************************** -->



<h1 id="organization-of-this-course">Organization of this course</h1>


<h2 id="structure-of-this-course" class="noBackToTop">Structure of the course</h2>

<p>This course features <a href = "https://www1.unisg.ch/org/st-ppp/vprgso16.nsf/(vwLStudienplanByNumber)/6,246,1.00?OpenDocument" target = "_blank/"> 11 units</a>. The course is structured as follows:
	<ol> <li> Introduction into the most important elements of R and data analysis; on the playground using fake data; 4 sessions
		<li> Applying programming with R "in the wild"; we will analyze data published by the Swiss National Bank; 4 sessions
		<li> Do-it-yourself group-projects and in-class presentations; 2 sessions
		<li> Open-laptop/Google exam in the last session
	</ol>

</p>

<h2 id="group-projects">Home-assignments</h2>

<p>Doing things yourself, spending time on figuring out what happens if you change this or that piece of code is absolutely essential for learning to program. Therefore, you will regularly be asked to solve some programming problems at home, although probably not every single session.</p>

<p style = "padding-left:40px; padding-right: 70px"><span style = "color:#e60000;">NOTE: At the beginning of the class, some of you will be asked on a random basis to present your solution or &mdash; if you were not able to solve it &mdash; comment on your experience and why you run into troubles. 
</span></p>

<p style = "padding-left:40px; padding-right: 70px"><span style = "color:#e60000;">I am also trying my best to regularly ask you one or a few open-ended question using the <em>Test</em> feature on StudyNet. These questions will be posted only after class, to make sure that it really fits to what we did in class. For your answer, you may have to copy a piece of code into the answer field. You will get additional instructions on this.</span></p>


<h2 id="group-projects">Group projects</h2>

<p>You will be working on a project where you put into practice what you have learned in this course. You will work in <b>groups of 4 students</b>. You will analyze data that highlight important aspects of a practical decision problem at the government or in a company or NGO. You are free to propose your own topic and data; however, you will need my approval.
Topics will be assigned in the session of <b>March 31</b>. You will present your results in short elevator-pitch-like presentations in the sessions on <b>May 12 and May 19. Attendence of these sessions is mandatory.</b></p>


<h2 id="exam-and-grading">Exams and grading</h2>

<p>The overall grade for this course will depend on both the quality of your group-project and the written exam. Note that you will write the exam on your own device during the last session of this course. You will be given time to upload the exam to StudyNet at the end of the session. The group assignment counts for 60 percent, the written exam for 40 percent of your overall grade. Please find further information in the <a href = "pdfs/Kursmerkblatt.pdf" target="_blank"><em>Kursmerkblatt</em></a>. The exam will include questions where you have to google for the solution of a problem that you have not yet seen in exactly this form. You will train this during the course and while working on your group project. In another type of exam question, you will have to understand a piece of code that someone else has written, potentially with a mistake. All these exam questions prepare you for real-life analytics.</p>


<h2 id="lecture-notes-and-books">Lecture notes, books, further readings &hellip;</h2>

<blockquote class="leadingQuote"><q><i>When learning to code, Google is your best friend...</i></q>
<a href = http://stackoverflow.com/questions/14830014/add-image-s-inside-a-div-with-jquery target="_blank">Stackoverflow</a></blockquote>

<p>For this course, you do not have to read any books. The best source for R documentation is the Internet, as the quote above suggests. In fact, books become quickly outdated since R is evolving rapidly. Therefore, you will have to learn to rely on googling. You will also find quite a number of good videos on Youtube. Finding solutions through googling will also be an important learning goal of this course.</p>

<p>Having said this, the most important material for this course, in terms of documentation, are the R and markdown scripts that we will work out together during classes. These scripts will contain many comments that allow you to understand what we are doing. A second important source are these notes you are just reading, in form of a simple website. I have tried my best to make this website somehow readable on any device and for any browser. However, some features do not look optimal for some browsers (sliders look somewhat ugly in Safari, and it is not possible to make the text bigger in Edge). If you encounter troubles, try to use Chrome; if that also does not work, let me know.</p>

<p style = "padding-left:40px; padding-right: 70px"><span style = "color:#e60000;">NOTE: After each class, the R scripts that we worked on during class will be published in these lecture notes, together with any remarks that seem noteworthy in light of the discussions during class.
</span></p>

<p>If you nevertheless feel better having a book in your hands, this one is actually very well written, very accessible, and still mostly up-to-date:
<ul><li>Jared P. Lander, <em>R for Everyone</em>, Addison Wesley Data & Analytics Series, 2014
</ul>
</p>

<h2 id="communication">Communication</h2>

<p>If you feel that a particular topic remained unclear and you want me to get back to it during the following class, or if you have suggestions for covering additional material, feel free to send an email to <span style = "color:#27738C">johannes.binswanger@unisg.ch</span>. I also set up a forum on StudyNet where you can send anonymous feedback. But please be constructive, even if it's anonymous &hellip;</p>









<!-- ************  GETTING STARTED ********************  -->




<h1 id="lecture1">Lecture 1</h1>

<p>During the first session, we did install R and RStudio. Although we had some problems with the WiFi hotspot, it worked for most or you. In this <a href="pdfs/Installing R on Win10.pdf" target = "_blank">pdf</a> you find some quick-and-dirty documentation of the most important screenshots for installing R and RStudio on a Windows 10 machine. Below, you find a simple slide show that shows the installation on a Mac.</p>

  


<!-- ************  IMAGES SLIDE SHOW ********************  -->


<!-- Use Slide.js
http://www.slidesjs.com/
Download and select... I chose the Standard version, see Slides-SlidesJS-3/examples/standard
-->


<div class="slideFrame">
<div class="container">
<p class="slideShowTitle"><i>SLIDESHOW: </i>Here are some screenshots I made when installing R and RStudio on a Mac</p>
    <div id="slides">
    <img src="images/image (1).png" >
    <img src="images/image (2).png" >
      <img src="images/image (3).png" >
	  <img src="images/image (4).png" >
	  <img src="images/image (5).png" >
	  <img src="images/image (6).png" >
	  <img src="images/image (7).png" >
	  <img src="images/image (8).png" >
	  <img src="images/image (9).png" >
	  <img src="images/image (10).png" >
	  <img src="images/image (11).png" >
    <img src="images/image (12).png" >
      <img src="images/image (13).png" >
	  <img src="images/image (14).png" >
	  <img src="images/image (15).png" >
	  <img src="images/image (16).png" >
	  <img src="images/image (17).png" >
	  <img src="images/image (18).png" >
	  <img src="images/image (19).png" >
	  <img src="images/image (20).png" >
	  <img src="images/image (21).png" >
    <img src="images/image (22).png" >
      <img src="images/image (23).png" >
	  <img src="images/image (24).png" >
	  <img src="images/image (25).png" >
	  <img src="images/image (26).png" >
	  <img src="images/image (27).png" >
	  <img src="images/image (28).png" >
	  <img src="images/image (29).png" >
	  <img src="images/image (30).png" >
	  <img src="images/image (31).png" >
    <img src="images/image (32).png" >
      <img src="images/image (33).png" >
	  <img src="images/image (34).png" >
	  <img src="images/image (35).png" >
	  <img src="images/image (36).png" >
	  <img src="images/image (37).png" >
	  
      
      <a href="#" class="slidesjs-previous slidesjs-navigation"><i class="icon-chevron-left icon-large"></i></a>
      <a href="#" class="slidesjs-next slidesjs-navigation"><i class="icon-chevron-right icon-large"></i></a>
    </div>
  </div>
 </div>
  
  

  <script>
    $(function() {
      $('#slides').slidesjs({
        width: 800,
        height: 520,//USE THIS LINE TO REGULATE DISTANCE BETWEEN PREVIOUS/NEXT AND IMAGE!!!
        navigation: {active: true}
      });
    });
	
	
	
  </script>
  
  

  



<!-- ************ END OF IMAGES SLIDE SHOW ********************  -->

</br>  

</br>  

<p>During class, we worked out the following script (note that below you can also see the results of our commands, indicated by double hashtags).</p>


<div class="chunk" id="unnamed-chunk-1"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl com"># R live script, Lecture 1, Feb 25, 2016</span>

<span class="hl std">a</span> <span class="hl kwb">=</span> <span class="hl num">2</span>
<span class="hl std">a</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 2
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># Variables have types. Let's see what's</span>
<span class="hl com"># the type of a...</span>
<span class="hl kwd">class</span><span class="hl std">(a)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] &quot;numeric&quot;
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># Are there other types?</span>
<span class="hl std">aAsChar</span> <span class="hl kwb">=</span> <span class="hl str">&quot;a&quot;</span>
<span class="hl std">aAsChar</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] &quot;a&quot;
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">class</span><span class="hl std">(aAsChar)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] &quot;character&quot;
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com">#Go on...</span>
<span class="hl std">b</span> <span class="hl kwb">=</span> <span class="hl num">3</span>
<span class="hl std">bAsWhatever</span> <span class="hl kwb">=</span> <span class="hl std">b</span>
<span class="hl std">bAsWhatever</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 3
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># Let's do some algebra</span>
<span class="hl std">a</span><span class="hl opt">+</span><span class="hl std">b</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 5
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">a</span><span class="hl opt">*</span><span class="hl std">b</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 6
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">a</span><span class="hl opt">^</span><span class="hl std">b</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 8
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">i</span> <span class="hl kwb">&lt;-</span> <span class="hl num">1</span>  <span class="hl com"># Assignment operator</span>
        <span class="hl com"># same as &quot;=&quot;, the latter is also assignment operator</span>
<span class="hl std">i</span> <span class="hl kwb">=</span> <span class="hl num">1</span>
<span class="hl std">j</span> <span class="hl kwb">=</span> <span class="hl std">i</span>  <span class="hl com"># passed by value</span>
<span class="hl std">i</span> <span class="hl kwb">=</span> <span class="hl num">2</span>
<span class="hl com"># What will j be?</span>
<span class="hl std">j</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 1
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">i</span> <span class="hl opt">==</span> <span class="hl std">j</span> <span class="hl com"># this is nothing else as 2 == 1</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] FALSE
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># &quot;=&quot; is an assignment operator</span>
<span class="hl com"># &quot;==&quot; means mathematical equality</span>

<span class="hl std">l</span> <span class="hl kwb">=</span> <span class="hl std">i</span> <span class="hl opt">==</span><span class="hl std">j</span>
<span class="hl std">l</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] FALSE
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">class</span><span class="hl std">(l)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] &quot;logical&quot;
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com">######################################################</span>
<span class="hl com">######################################################</span>

<span class="hl com"># Beyond the most basic data structures</span>
<span class="hl std">shopList</span> <span class="hl kwb">=</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl str">&quot;milk (l)&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;cereals (packs)&quot;</span><span class="hl std">,</span>
             <span class="hl str">&quot;quollfrisch (packs)&quot;</span><span class="hl std">)</span>

<span class="hl com"># shopList is a vector</span>

<span class="hl std">quantList</span> <span class="hl kwb">=</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl num">3</span><span class="hl std">,</span> <span class="hl num">2</span><span class="hl std">,</span> <span class="hl num">5</span><span class="hl std">)</span>

<span class="hl std">priceList</span> <span class="hl kwb">=</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl num">1.95</span><span class="hl std">,</span> <span class="hl num">2.05</span><span class="hl std">,</span> <span class="hl num">11.95</span><span class="hl std">)</span>

<span class="hl std">shoppingData</span> <span class="hl kwb">=</span> <span class="hl kwd">data.frame</span><span class="hl std">(shopList, quantList, priceList)</span>

<span class="hl kwd">class</span><span class="hl std">(shoppingData)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] &quot;data.frame&quot;
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">shoppingData</span><span class="hl opt">$</span><span class="hl std">expPerItem</span> <span class="hl kwb">=</span>
  <span class="hl std">shoppingData</span><span class="hl opt">$</span><span class="hl std">quantList</span><span class="hl opt">*</span><span class="hl std">shoppingData</span><span class="hl opt">$</span><span class="hl std">priceList</span>

<span class="hl kwd">sink</span><span class="hl std">(</span><span class="hl str">&quot;myShopList.txt&quot;</span><span class="hl std">,</span> <span class="hl kwc">append</span> <span class="hl std">=</span> <span class="hl num">FALSE</span><span class="hl std">)</span>
<span class="hl std">shoppingData</span>
</pre></div>
<div class="output"><pre class="knitr r">##              shopList quantList priceList expPerItem
## 1            milk (l)         3      1.95       5.85
## 2     cereals (packs)         2      2.05       4.10
## 3 quollfrisch (packs)         5     11.95      59.75
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">sink</span><span class="hl std">()</span>
<span class="hl kwd">file.show</span><span class="hl std">(</span><span class="hl str">&quot;myShopList.txt&quot;</span><span class="hl std">)</span>
</pre></div>
</div></div>

<p>To sum up, you have learned to following during this lecture:
<ul>
  <li>There are a number of different data types:
  <ul>
    <li>numeric types
    <li>character types
    <li>logical types
    <li>data frames (i.e. a sort of spreadsheet)
  </ul>
  <li> &quot;=&quot; or &quot;<-&quot; means assignment
  <li> &quot;= =&quot; means mathematical equality
</ul>
</p>

<p>Next time, we'll dig a little deeper.</p>


<!-- ************************************************************** -->


<h1 id="lecture2">Lecture 2</h1>

<p>During class, we worked on the following lines of code.</p>

<div class="chunk" id="unnamed-chunk-2"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl com">#################</span>
<span class="hl com"># Lecture 2 live</span>
<span class="hl com">#################</span>

<span class="hl com"># Topics of this lecture</span>
<span class="hl com"># 1) Juggling with dataframes</span>
<span class="hl com"># 2) Reading data from a website</span>
<span class="hl com"># 3) Package</span>
<span class="hl com"># 4) Loops</span>
<span class="hl com"># 5) Drawing random numbers from a particular</span>
<span class="hl com">#   distribution (if we get there)</span>

<span class="hl com"># Install XML package</span>
<span class="hl com"># Do this only once per machine!</span>
<span class="hl com"># It's like an app</span>
<span class="hl com"># install.packages(&quot;XML&quot;)</span>

<span class="hl com"># Call the package/library</span>
<span class="hl com"># Do this in every session</span>
<span class="hl kwd">rm</span><span class="hl std">(</span><span class="hl kwc">list</span> <span class="hl std">=</span> <span class="hl kwd">ls</span><span class="hl std">())</span>
<span class="hl kwd">library</span><span class="hl std">(</span><span class="hl str">&quot;XML&quot;</span><span class="hl std">)</span>

<span class="hl std">shopList_0</span> <span class="hl kwb">=</span> <span class="hl kwd">readHTMLTable</span><span class="hl std">(</span><span class="hl str">&quot;http://www.einkaufszettel.de/einkaufslisten/einkaufszettel-vorlage&quot;</span><span class="hl std">)</span>
<span class="hl kwd">class</span><span class="hl std">(shopList_0)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] &quot;list&quot;
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># This is a list, new data type</span>
<span class="hl kwd">length</span><span class="hl std">(shopList_0)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 2
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># Select second list item</span>
<span class="hl std">shopList</span> <span class="hl kwb">=</span> <span class="hl std">shopList_0[[</span><span class="hl num">2</span><span class="hl std">]]</span>
<span class="hl kwd">class</span><span class="hl std">(shopList)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] &quot;data.frame&quot;
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">class</span><span class="hl std">(shopList</span><span class="hl opt">$</span><span class="hl std">V1)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] &quot;factor&quot;
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># The type of this variable is factor</span>
<span class="hl com"># and we don't like that, for what we want to do</span>
<span class="hl com"># We want &quot;character&quot;</span>
<span class="hl std">shopList[]</span> <span class="hl kwb">=</span> <span class="hl kwd">lapply</span><span class="hl std">(shopList, as.character)</span>
<span class="hl kwd">class</span><span class="hl std">(shopList</span><span class="hl opt">$</span><span class="hl std">V1)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] &quot;character&quot;
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">test1</span> <span class="hl kwb">=</span> <span class="hl std">shopList[</span>   <span class="hl num">1</span> <span class="hl std">,</span> <span class="hl com">#rows </span>
                      <span class="hl std">]</span> <span class="hl com">#columns</span>
                        <span class="hl com"># empty means ALL!</span>
<span class="hl std">test1</span> <span class="hl kwb">=</span> <span class="hl std">shopList[</span><span class="hl num">1</span><span class="hl std">, ]</span>
<span class="hl kwd">class</span><span class="hl std">(test1)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] &quot;data.frame&quot;
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">test2</span> <span class="hl kwb">=</span> <span class="hl std">shopList[ ,</span> <span class="hl num">1</span><span class="hl std">]</span>
<span class="hl kwd">class</span><span class="hl std">(test2)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] &quot;character&quot;
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">test3</span> <span class="hl kwb">=</span> <span class="hl std">shopList[ ,</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl num">1</span><span class="hl std">,</span><span class="hl num">2</span><span class="hl std">)]</span>

<span class="hl com"># delete row 1 and 18 from shopList</span>
<span class="hl std">shopList</span> <span class="hl kwb">=</span> <span class="hl std">shopList[</span> <span class="hl opt">-</span><span class="hl kwd">c</span><span class="hl std">(</span><span class="hl num">1</span><span class="hl std">,</span><span class="hl num">18</span><span class="hl std">) ,  ]</span>

<span class="hl com">#columns to select</span>
<span class="hl std">sel</span> <span class="hl kwb">=</span> <span class="hl kwd">seq</span><span class="hl std">(</span><span class="hl num">1</span><span class="hl std">,</span> <span class="hl num">9</span><span class="hl std">,</span> <span class="hl kwc">by</span><span class="hl std">=</span><span class="hl num">2</span><span class="hl std">)</span>

<span class="hl std">shopList</span> <span class="hl kwb">=</span> <span class="hl std">shopList[ , sel]</span>

<span class="hl kwd">rm</span><span class="hl std">(</span><span class="hl kwc">list</span> <span class="hl std">=</span> <span class="hl kwd">ls</span><span class="hl std">(</span><span class="hl kwc">pattern</span> <span class="hl std">=</span> <span class="hl str">&quot;^test&quot;</span><span class="hl std">))</span>

<span class="hl com"># Tests for getting all shopping items in one column</span>
<span class="hl std">test1</span> <span class="hl kwb">=</span> <span class="hl kwd">c</span><span class="hl std">(shopList</span><span class="hl opt">$</span><span class="hl std">V1,</span>
          <span class="hl std">shopList</span><span class="hl opt">$</span><span class="hl std">V3,</span>
          <span class="hl std">shopList</span><span class="hl opt">$</span><span class="hl std">V5,</span>
          <span class="hl std">shopList</span><span class="hl opt">$</span><span class="hl std">V7,</span>
          <span class="hl std">shopList</span><span class="hl opt">$</span><span class="hl std">V9</span>
          <span class="hl std">)</span>

<span class="hl std">test1</span> <span class="hl kwb">=</span> <span class="hl kwd">as.data.frame</span><span class="hl std">(test1)</span>

<span class="hl std">test2</span> <span class="hl kwb">=</span> <span class="hl kwd">c</span><span class="hl std">()</span> <span class="hl com">#initialization</span>
<span class="hl kwa">for</span> <span class="hl std">(i</span> <span class="hl kwa">in</span> <span class="hl num">1</span><span class="hl opt">:</span><span class="hl kwd">ncol</span><span class="hl std">(shopList)){</span>
  <span class="hl com"># Here is our algorithm</span>
  <span class="hl std">test2</span> <span class="hl kwb">=</span> <span class="hl kwd">c</span><span class="hl std">(test2, shopList[ , i])</span>
<span class="hl std">}</span>
<span class="hl std">test2</span> <span class="hl kwb">=</span> <span class="hl kwd">as.data.frame</span><span class="hl std">(test2)</span>

<span class="hl std">shopList</span> <span class="hl kwb">=</span> <span class="hl std">test2</span>
<span class="hl kwd">class</span><span class="hl std">(shopList)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] &quot;data.frame&quot;
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># Change name of the single variable in shopList</span>
<span class="hl kwd">names</span><span class="hl std">(shopList)</span> <span class="hl kwb">=</span> <span class="hl str">&quot;item&quot;</span>
<span class="hl kwd">class</span><span class="hl std">(shopList</span><span class="hl opt">$</span><span class="hl std">item)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] &quot;factor&quot;
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com">#Convert this to character</span>
<span class="hl std">shopList[]</span> <span class="hl kwb">=</span> <span class="hl kwd">lapply</span><span class="hl std">(shopList, as.character)</span>
<span class="hl kwd">class</span><span class="hl std">(shopList</span><span class="hl opt">$</span><span class="hl std">item)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] &quot;character&quot;
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">sink</span><span class="hl std">(</span><span class="hl str">&quot;inspectWhatWeAreDoing.txt&quot;</span><span class="hl std">,</span> <span class="hl kwc">append</span><span class="hl std">=</span><span class="hl num">FALSE</span><span class="hl std">)</span>
<span class="hl std">shopList</span><span class="hl opt">$</span><span class="hl std">item</span> <span class="hl opt">==</span> <span class="hl str">&quot;&quot;</span>
</pre></div>
<div class="output"><pre class="knitr r">##   [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [12]  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE
##  [23] FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [34]  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE
##  [45] FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE
##  [56] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [67] FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE FALSE
##  [78] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [89] FALSE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [100] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE
## [111]  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [122] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE FALSE FALSE
## [133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [144] FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE FALSE FALSE
## [155] FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE
## [166]  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [177] FALSE FALSE  TRUE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [188]  TRUE  TRUE  TRUE
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">which</span><span class="hl std">(shopList</span><span class="hl opt">$</span><span class="hl std">item</span> <span class="hl opt">==</span> <span class="hl str">&quot;&quot;</span><span class="hl std">)</span>
</pre></div>
<div class="output"><pre class="knitr r">##  [1]  12  13  14  15  16  27  28  29  30  31  32  33  34  35  36  37  38
## [18]  50  51  52  53  54  74  75  76  90  91  92 106 107 108 109 110 111
## [35] 112 113 114 128 129 130 149 150 151 152 162 163 164 165 166 167 168
## [52] 179 182 183 184 185 186 187 188 189 190
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">sink</span><span class="hl std">()</span>
<span class="hl kwd">file.show</span><span class="hl std">(</span><span class="hl str">&quot;inspectWhatWeAreDoing.txt&quot;</span><span class="hl std">)</span>

<span class="hl com"># In class, we got until here. </span>

<span class="hl com"># Now we still want to drop the empty rows from shopList</span>
<span class="hl com"># In class, I still typed the following (how commented out with hashtags)</span>

<span class="hl com"># shopList = shopList[-which(shopList$item == &quot;&quot;) , ]</span>

<span class="hl com"># This does not yield the desired result, for somewhat complicated reasons</span>
<span class="hl com"># Let's not bother right now. </span>
<span class="hl com"># Instead, the following works</span>

<span class="hl std">shopList</span> <span class="hl kwb">=</span> <span class="hl kwd">as.data.frame</span><span class="hl std">(shopList</span><span class="hl opt">$</span><span class="hl std">item[</span><span class="hl opt">-</span><span class="hl kwd">which</span><span class="hl std">(shopList</span><span class="hl opt">$</span><span class="hl std">item</span> <span class="hl opt">==</span> <span class="hl str">&quot;&quot;</span><span class="hl std">) ])</span>
<span class="hl kwd">names</span><span class="hl std">(shopList)</span> <span class="hl kwb">=</span> <span class="hl str">&quot;item&quot;</span>
</pre></div>
</div></div>

<p>During class, the very last command did not achieve what we wanted, namely deleting
all empty rows for the <code>item</code> column of the dataframe. In the above script, I added two lines that actually achieve what we want. (The reason why the piece we typed in class does not work is a bit complicated, let's not bother&hellip;) </p>

<p>The most important things you have seen during this lecture are the following.
<ul>
  <li> Install a package with <code>install.packages(&lt;package name in quotes&gt;)</code>. You have to do this only once on a particular machine.
  <li> Load packages with <code>library(&lt;package name in quotes&gt;)</code>.
  <li> There is a data type <code>list</code>.
  <li> There is a data type <code>factor</code>.
  <li> You can select rows and columns from a data frame with <code>dataframe[&lt;rows&gt;,&lt;columns&gt;]</code>.
  <li> You can select multiple rows or columns, and you can <i>un</i>select columns by using a minus sign.
  <li>Use loops for &rdquo;repetitive&ldquo; tasks.
  <li>Give names to columns/variables with <code>names(dataframe)</code>.
  <li>And a few more things&hellip;
</ul>
</p>

<p> </p>

<p> </p>


</div> <!-- end of div scriptText -->


<div class='markEnd'> </div> <!-- A last horizontal ruler at the end of the document-->

</div> <!-- end of content div -->

</body>
</html>
